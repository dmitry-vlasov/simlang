Simple language (simlang)
================================

Main purpose of this language is educational - as a simple example of a compiler -> bytecode -> executor toolchain.

The main simlang features:
* Basic types: integer, boolean and string
* assignment to local variables, i.e. `a = 5`
* basic arithmetc operations (`+`, `-`, `*`, `/`, `%`), comparison (`<`, `>`, `<=`, `>=`, `==`, `!=`), boolean operators (`!`, `&&`, `||`)
* strings may be concatenated with `+` operator
* basic control-flow constructions: `if` - `else`, `while`, scope blocks (in curly braces: `{` `}`).
* type conversion functions: `i2s`, `i2b`, `s2i`, `s2b`, `b2i`, `b2s` - converts values of basic types to other types
* no explicit variable typing is needed - compiler determines types of expressions during compilation
* input from the console with `read` command

Example of syntax:
```
{
	n = 0
	print "input integer square root argument:"
	read n
	x = 0
	y = 0
	while y <= n {
		y = y + x + x + 1
		x = x + 1
	}
	x = x - 1
	print "integer square root of " + i2s(n) + " is " + i2s(x)
}
```

Other examples of syntax are in `tests` folder.
The exact grammar is in `simlang.gringo` file.

Compiler
---------

Compiler (simc) allows a user to:
 * to parse a program and see the AST (DAG) of a program
 * compile a program to bytecode, see its representation
 
Executor
--------

Executor (sime) is a program, which actually executes the bytecode. So it:
 * executes a bytecode, 
 * traces the execution (optionally)

All programming is done in the language  [Flow9](https://github.com/area9innovation/flow9)

For comfortable code browsing it is highly recomended to install the flow9 language and vscode
extension for flow9. 

Usage
-----
Command line to invoke a compiler:
`java -jar simc.jar file=tests/sqrt`

To see all intermediate stages of compilation and generated bytecode:
`java -jar simc.jar file=tests/sqrt show-all=1`

To run a particular file (compiled bytecode):
`java -jar sime.jar file=tests/sqrt`

To trace the execution of a program:
`java -jar sime.jar file=tests/sqrt trace=1`

Tests
-----
To run a test suite (execute all test files from `tests` folder):
`java -jar test_runner.jar`

To run all tests with their output:
`java -jar test_runner.jar show-out=1`
In this case checks on errors are not performed, just output is flushed onto stdout.

Tests which end on `_err` must cause compilation errors, this is considered as a success of a test.

Build
-----
To build simlang toolchan use (flowc1 must be installed in the system):
`flowc1 jar=1 simc; flowc1 jar=1 sime; flowc1 jar=1 test_runner`

Dependencies
------------
java runtime (jre) to run, java compiler (11 or higher) to compile, installation of flow9 to modify/examine code.
